{"ast":null,"code":"import _slicedToArray from\"/Users/sameenathabassum/Desktop/discord-test/fullstack-test/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/sameenathabassum/Desktop/discord-test/fullstack-test/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React from\"react\";import classNames from\"classnames\";import Button from\"./Button\";import{createMessage}from\"../actions\";import TextInput from\"./TextInput\";import{useActiveChannel}from\"../hooks/channels\";import{useUserStore}from\"../stores/users\";import{MESSAGE_LIMIT}from\"../constants\";import styles from\"./MessageComposer.module.css\";var MESSAGE_LIMIT_BUFFER=8;export var MessageCharacterWarning=function MessageCharacterWarning(_ref){var content=_ref.content;var charactersLeft=MESSAGE_LIMIT-content.length;if(charactersLeft>MESSAGE_LIMIT_BUFFER){return null;}return React.createElement(\"div\",{className:classNames(styles.characterLimit,_defineProperty({},styles.characterLimitExceeded,charactersLeft<0))},charactersLeft);};var MessageComposer=function MessageComposer(){var activeUserId=useUserStore(function(state){return state.activeUserId;});var activeChannel=useActiveChannel();var inputRef=React.useRef(null);var isDisabled=activeUserId==null||activeChannel==null;var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),inputValue=_React$useState2[0],setInputValue=_React$useState2[1];var onChange=function onChange(e){setInputValue(e.target.value);};return React.createElement(\"form\",{className:styles.root,onSubmit:function onSubmit(event){event.preventDefault();if(inputRef.current!=null){var value=inputRef.current.value;if(value!==\"\"&&value.length<=MESSAGE_LIMIT){createMessage(activeChannel.id,inputRef.current.value);inputRef.current.value=\"\";inputRef.current.focus();}}}},React.createElement(MessageCharacterWarning,{content:inputValue}),React.createElement(\"div\",{className:styles.wrapper},React.createElement(TextInput,{className:styles.input,disabled:isDisabled,onChange:onChange,placeholder:activeChannel==null?\"Select a channel\":activeUserId==null?\"Select a user\":\"Message #\".concat(activeChannel.name),ref:inputRef}),React.createElement(Button,{className:styles.button,type:\"submit\",disabled:isDisabled||inputValue.length>MESSAGE_LIMIT},\"Send\")));};export default MessageComposer;","map":{"version":3,"sources":["/Users/sameenathabassum/Desktop/discord-test/fullstack-test/src/components/MessageComposer.jsx"],"names":["React","classNames","Button","createMessage","TextInput","useActiveChannel","useUserStore","MESSAGE_LIMIT","styles","MESSAGE_LIMIT_BUFFER","MessageCharacterWarning","content","charactersLeft","length","characterLimit","characterLimitExceeded","MessageComposer","activeUserId","state","activeChannel","inputRef","useRef","isDisabled","useState","inputValue","setInputValue","onChange","e","target","value","root","event","preventDefault","current","id","focus","wrapper","input","name","button"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport classNames from \"classnames\";\nimport Button from \"./Button\";\nimport { createMessage } from \"../actions\";\nimport TextInput from \"./TextInput\";\nimport { useActiveChannel } from \"../hooks/channels\";\nimport { useUserStore } from \"../stores/users\";\nimport { MESSAGE_LIMIT } from \"../constants\";\nimport styles from \"./MessageComposer.module.css\";\n\nconst MESSAGE_LIMIT_BUFFER = 8;\n\nexport const MessageCharacterWarning = ({ content }) => {\n  const charactersLeft = MESSAGE_LIMIT - content.length;\n  if (charactersLeft > MESSAGE_LIMIT_BUFFER) {\n    return null;\n  }\n  return (\n    <div\n      className={classNames(styles.characterLimit, {\n        [styles.characterLimitExceeded]: charactersLeft < 0,\n      })}\n    >\n      {charactersLeft}\n    </div>\n  );\n};\n\nconst MessageComposer = () => {\n  const activeUserId = useUserStore((state) => state.activeUserId);\n  const activeChannel = useActiveChannel();\n  const inputRef = React.useRef(null);\n  const isDisabled = activeUserId == null || activeChannel == null;\n\n  const [inputValue, setInputValue] = React.useState(\"\");\n  const onChange = (e) => {\n    setInputValue(e.target.value);\n  };\n\n  return (\n    <form\n      className={styles.root}\n      onSubmit={(event) => {\n        event.preventDefault();\n        if (inputRef.current != null) {\n          const value = inputRef.current.value;\n          if (value !== \"\" && value.length <= MESSAGE_LIMIT) {\n            createMessage(activeChannel.id, inputRef.current.value);\n            inputRef.current.value = \"\";\n            inputRef.current.focus();\n          }\n        }\n      }}\n    >\n      <MessageCharacterWarning content={inputValue} />\n      <div className={styles.wrapper}>\n        <TextInput\n          className={styles.input}\n          disabled={isDisabled}\n          onChange={onChange}\n          placeholder={\n            activeChannel == null\n              ? \"Select a channel\"\n              : activeUserId == null\n              ? \"Select a user\"\n              : `Message #${activeChannel.name}`\n          }\n          ref={inputRef}\n        />\n        <Button\n          className={styles.button}\n          type=\"submit\"\n          disabled={isDisabled || inputValue.length > MESSAGE_LIMIT}\n        >\n          Send\n        </Button>\n      </div>\n    </form>\n  );\n};\n\nexport default MessageComposer;\n"]},"metadata":{},"sourceType":"module"}