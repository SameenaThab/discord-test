{"ast":null,"code":"import _slicedToArray from \"/Users/sameenathabassum/Desktop/discord-test/fullstack-test/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/sameenathabassum/Desktop/discord-test/fullstack-test/src/components/MessageViewer.jsx\";\nimport classnames from \"classnames\";\nimport formatRelative from \"date-fns/formatRelative\";\nimport React from \"react\";\nimport { useChannelStore } from \"../stores/channels\";\nimport { useMessageStore } from \"../stores/messages\";\nimport { useUserStore } from \"../stores/users\";\nimport MessageEditor from \"./MessageEditor\";\nimport styles from \"./MessageViewer.module.css\";\n\nconst Message = ({\n  content,\n  createdAt,\n  id,\n  userId,\n  channelId\n}) => {\n  const _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        isEditing = _React$useState2[0],\n        setIsEditing = _React$useState2[1];\n\n  const user = useUserStore(state => state.users.find(user => user.id === userId));\n  const activeUserId = useUserStore(state => state.activeUserId);\n  const dateInstance = React.useMemo(() => new Date(createdAt), [createdAt]);\n  return React.createElement(\"div\", {\n    className: styles.message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: styles.metadata,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, user == null ? null : React.createElement(\"span\", {\n    className: styles.username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, user.username), React.createElement(\"span\", {\n    className: styles.timestamp,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, formatRelative(dateInstance, new Date()))), isEditing ? React.createElement(MessageEditor, {\n    channelId: channelId,\n    id: id,\n    content: content,\n    onClose: () => setIsEditing(false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }) : content, userId === activeUserId && !isEditing ? React.createElement(\"button\", {\n    onClick: () => setIsEditing(true),\n    className: styles.editButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Edit\") : null);\n};\n\nconst MessageViewer = () => {\n  const allMessages = useMessageStore(state => state.messages);\n  const activeChannelId = useChannelStore(state => state.activeChannelId);\n  const messagesForActiveChannel = React.useMemo(() => allMessages.filter(message => message.channelId === activeChannelId), [activeChannelId, allMessages]);\n  const isEmpty = messagesForActiveChannel.length === 0;\n  return React.createElement(\"div\", {\n    className: classnames(styles.wrapper, {\n      [styles.wrapperEmpty]: isEmpty\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, isEmpty ? React.createElement(\"div\", {\n    className: styles.empty,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"No messages\", \" \", React.createElement(\"span\", {\n    \"aria-label\": \"Sad face\",\n    role: \"img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"\\uD83D\\uDE22\")) : messagesForActiveChannel.map(message => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Message, {\n    channelId: activeChannelId,\n    key: message.id,\n    id: message.id,\n    content: message.content,\n    createdAt: message.createdAt,\n    userId: message.userId,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: styles.empty,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: styles.button,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"\\uD83D\\uDC4D\"), React.createElement(Button, {\n    className: styles.button,\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"\\uD83D\\uDC4D\")))));\n};\n\nexport default MessageViewer;","map":{"version":3,"sources":["/Users/sameenathabassum/Desktop/discord-test/fullstack-test/src/components/MessageViewer.jsx"],"names":["classnames","formatRelative","React","useChannelStore","useMessageStore","useUserStore","MessageEditor","styles","Message","content","createdAt","id","userId","channelId","useState","isEditing","setIsEditing","user","state","users","find","activeUserId","dateInstance","useMemo","Date","message","metadata","username","timestamp","editButton","MessageViewer","allMessages","messages","activeChannelId","messagesForActiveChannel","filter","isEmpty","length","wrapper","wrapperEmpty","empty","map","button"],"mappings":";;AAAA,OAAOA,UAAP,MAAuB,YAAvB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,oBAAhC;AACA,SAASC,eAAT,QAAgC,oBAAhC;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,MAAP,MAAmB,4BAAnB;;AAEA,MAAMC,OAAO,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA,SAAX;AAAsBC,EAAAA,EAAtB;AAA0BC,EAAAA,MAA1B;AAAkCC,EAAAA;AAAlC,CAAD,KAAmD;AAAA,0BAC/BX,KAAK,CAACY,QAAN,CAAe,KAAf,CAD+B;AAAA;AAAA,QAC1DC,SAD0D;AAAA,QAC/CC,YAD+C;;AAEjE,QAAMC,IAAI,GAAGZ,YAAY,CAAEa,KAAD,IACxBA,KAAK,CAACC,KAAN,CAAYC,IAAZ,CAAkBH,IAAD,IAAUA,IAAI,CAACN,EAAL,KAAYC,MAAvC,CADuB,CAAzB;AAGA,QAAMS,YAAY,GAAGhB,YAAY,CAAEa,KAAD,IAAWA,KAAK,CAACG,YAAlB,CAAjC;AACA,QAAMC,YAAY,GAAGpB,KAAK,CAACqB,OAAN,CAAc,MAAM,IAAIC,IAAJ,CAASd,SAAT,CAApB,EAAyC,CAACA,SAAD,CAAzC,CAArB;AAEA,SACE;AAAK,IAAA,SAAS,EAAEH,MAAM,CAACkB,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAElB,MAAM,CAACmB,QAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGT,IAAI,IAAI,IAAR,GAAe,IAAf,GACC;AAAM,IAAA,SAAS,EAAEV,MAAM,CAACoB,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCV,IAAI,CAACU,QAAxC,CAFJ,EAIE;AAAM,IAAA,SAAS,EAAEpB,MAAM,CAACqB,SAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG3B,cAAc,CAACqB,YAAD,EAAe,IAAIE,IAAJ,EAAf,CADjB,CAJF,CADF,EASGT,SAAS,GACR,oBAAC,aAAD;AACE,IAAA,SAAS,EAAEF,SADb;AAEE,IAAA,EAAE,EAAEF,EAFN;AAGE,IAAA,OAAO,EAAEF,OAHX;AAIE,IAAA,OAAO,EAAE,MAAMO,YAAY,CAAC,KAAD,CAJ7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADQ,GAQRP,OAjBJ,EAmBGG,MAAM,KAAKS,YAAX,IAA2B,CAACN,SAA5B,GACC;AACE,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,IAAD,CAD7B;AAEE,IAAA,SAAS,EAAET,MAAM,CAACsB,UAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,GAOG,IA1BN,CADF;AA8BD,CAtCD;;AAwCA,MAAMC,aAAa,GAAG,MAAM;AAC1B,QAAMC,WAAW,GAAG3B,eAAe,CAAEc,KAAD,IAAWA,KAAK,CAACc,QAAlB,CAAnC;AACA,QAAMC,eAAe,GAAG9B,eAAe,CAAEe,KAAD,IAAWA,KAAK,CAACe,eAAlB,CAAvC;AACA,QAAMC,wBAAwB,GAAGhC,KAAK,CAACqB,OAAN,CAC/B,MACEQ,WAAW,CAACI,MAAZ,CAAoBV,OAAD,IAAaA,OAAO,CAACZ,SAAR,KAAsBoB,eAAtD,CAF6B,EAG/B,CAACA,eAAD,EAAkBF,WAAlB,CAH+B,CAAjC;AAKA,QAAMK,OAAO,GAAGF,wBAAwB,CAACG,MAAzB,KAAoC,CAApD;AAEA,SACE;AACE,IAAA,SAAS,EAAErC,UAAU,CAACO,MAAM,CAAC+B,OAAR,EAAiB;AAAE,OAAC/B,MAAM,CAACgC,YAAR,GAAuBH;AAAzB,KAAjB,CADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGGA,OAAO,GACN;AAAK,IAAA,SAAS,EAAE7B,MAAM,CAACiC,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACc,GADd,EAEE;AAAM,kBAAW,UAAjB;AAA4B,IAAA,IAAI,EAAC,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,CADM,GAQNN,wBAAwB,CAACO,GAAzB,CAA8BhB,OAAD,IAC3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AACA,IAAA,SAAS,EAAEQ,eADX;AAEA,IAAA,GAAG,EAAER,OAAO,CAACd,EAFb;AAGA,IAAA,EAAE,EAAEc,OAAO,CAACd,EAHZ;AAIA,IAAA,OAAO,EAAEc,OAAO,CAAChB,OAJjB;AAKA,IAAA,SAAS,EAAEgB,OAAO,CAACf,SALnB;AAMA,IAAA,MAAM,EAAEe,OAAO,CAACb,MANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EASA;AAAK,IAAA,SAAS,EAAEL,MAAM,CAACiC,KAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAEjC,MAAM,CAACmC,MAA1B;AAAkC,IAAA,IAAI,EAAC,QAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAIE,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAEnC,MAAM,CAACmC,MAA1B;AAAkC,IAAA,IAAI,EAAC,QAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,CATA,CADF,CAXJ,CADF;AAmCD,CA7CD;;AA+CA,eAAeZ,aAAf","sourcesContent":["import classnames from \"classnames\";\nimport formatRelative from \"date-fns/formatRelative\";\nimport React from \"react\";\nimport { useChannelStore } from \"../stores/channels\";\nimport { useMessageStore } from \"../stores/messages\";\nimport { useUserStore } from \"../stores/users\";\nimport MessageEditor from \"./MessageEditor\";\nimport styles from \"./MessageViewer.module.css\";\n\nconst Message = ({ content, createdAt, id, userId, channelId }) => {\n  const [isEditing, setIsEditing] = React.useState(false);\n  const user = useUserStore((state) =>\n    state.users.find((user) => user.id === userId)\n  );\n  const activeUserId = useUserStore((state) => state.activeUserId);\n  const dateInstance = React.useMemo(() => new Date(createdAt), [createdAt]);\n\n  return (\n    <div className={styles.message}>\n      <div className={styles.metadata}>\n        {user == null ? null : (\n          <span className={styles.username}>{user.username}</span>\n        )}\n        <span className={styles.timestamp}>\n          {formatRelative(dateInstance, new Date())}\n        </span>\n      </div>\n      {isEditing ? (\n        <MessageEditor\n          channelId={channelId}\n          id={id}\n          content={content}\n          onClose={() => setIsEditing(false)}\n        />\n      ) : (\n        content\n      )}\n      {userId === activeUserId && !isEditing ? (\n        <button\n          onClick={() => setIsEditing(true)}\n          className={styles.editButton}\n        >\n          Edit\n        </button>\n      ) : null}\n    </div>\n  );\n};\n\nconst MessageViewer = () => {\n  const allMessages = useMessageStore((state) => state.messages);\n  const activeChannelId = useChannelStore((state) => state.activeChannelId);\n  const messagesForActiveChannel = React.useMemo(\n    () =>\n      allMessages.filter((message) => message.channelId === activeChannelId),\n    [activeChannelId, allMessages]\n  );\n  const isEmpty = messagesForActiveChannel.length === 0;\n\n  return (\n    <div\n      className={classnames(styles.wrapper, { [styles.wrapperEmpty]: isEmpty })}\n    >\n      {isEmpty ? (\n        <div className={styles.empty}>\n          No messages{\" \"}\n          <span aria-label=\"Sad face\" role=\"img\">\n            ğŸ˜¢\n          </span>\n        </div>\n      ) : (\n        messagesForActiveChannel.map((message) => (\n          <div>\n            <Message\n            channelId={activeChannelId}\n            key={message.id}\n            id={message.id}\n            content={message.content}\n            createdAt={message.createdAt}\n            userId={message.userId}\n          />\n          <div className={styles.empty}>\n            <Button className={styles.button} type=\"submit\">\n              ğŸ‘\n            </Button>\n            <Button className={styles.button} type=\"submit\">\n              ğŸ‘\n            </Button>\n        </div>\n          </div>\n        ))\n      )}\n    </div>\n  );\n};\n\nexport default MessageViewer;\n"]},"metadata":{},"sourceType":"module"}